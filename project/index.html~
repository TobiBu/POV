---
layout: default
title: The POV Globe Project
description: Description of our goals, resources and so on.
category: project
---

<div class="inner">
<h1 align="center">
POV Globe - A Robotics-Project at the IWR in Heidelberg
</h1>
<table border=0><tr><td align=center><img src="{{ site.baseurl }}/images/setup.jpg" width=45% alt="Our POV Globe." title="Our POV Globe"></td></tr></table>
<p class="fancy" align="justify">
This summer term we have completed an interesting internship at our university: We've constructed a persitence of vision globe. <br>
The internship started in June 2015 already and lasted until the October 2015.
</p>

<br>
<div  style="border-bottom: 1px solid #ddd"></div>

<h2 align="center">
The university
</h2>
<p class="fancy" align="justify">
The internship took place at the <a href="http://www.uni-heidelberg.de/">University of Heidelberg</a>, located in a small, but famous and beautiful town in the south of Germany. The university can proudly call itself the oldest one in Germany.<br>
Altough all of us are studying physics, the project is part of the <a href="http://www.iwr.uni-heidelberg.de/">IWR (interdisciplinary research center for scientific computing)</a> at the <a href="http://www.mathinf.uni-heidelberg.de/">Informatics Faculty</a>, which illustrates the flexibility in our studies and also gives a hint of what we're mainly doing here: programming.<br>
As we were not the only ones working in a robotic internship, here is a <a href="http://joanna.iwr.uni-heidelberg.de/rlab/en/projects_list+sid=22">list of all current robotic-projects</a> at the <a href="http://joanna.iwr.uni-heidelberg.de/rlab/en/home">Robotics Lab</a>.<br>
Our project was supervised by Gero Plettenberg and Thomas Kloepfer.<BR>Thank you guys, for your help!
</p>

<br>
<div  style="border-bottom: 1px solid #ddd"></div>

<h2 align="center">
The resources & components
</h2>
<p class="fancy" align="justify">
As we planed to take the super-fancy robot home with us after finishing it, it was necessary to buy all the components by ourselves (the other groups got them payed by the robotics lab). Right from the beginning we tried to keep costs as low as possible (you know, as we're students, we always run out of money.... =/ ) - of course this resulted in a little loss of quality.
<BR>
The Programming tecniques and the information about how to build a POV-globe were either our personal knowledge or open-source from the internet.
<br>
Finally we had a great benefit of using the working-room of the robotics-lab, equipped with computers, internet and a lot of hardware-stuff (cables, connectors, electronic components, wood, metal, screws and many other things); thanks IWR! Also any tools needed, such as screw-drivers, drilling machines, saws, soldering irons, voltage and ampere meters, voltage suppliers and many more things, could be found and used there.<br>
<br>
Besides some cables, switches, diodes, resistors, connectors and screws, the components we were using, are
</p>


<ul>

<li> a mini computer <a href="http://www.raspberrypi.org/products/raspberry-pi-2-model-b/">Raspberry Pi Model B+</a>,

<li> a 4GB micro SD-card (anyone like <a href="http://www.kingston.com/de/flash/microsd_cards#">these</a>)<br>(Note: I suggest picking a bigger one than 4GB, we had some problems with the space during our work. 8GB is already fine.),

<li> a simple <a href="http://www.tp-link.us/products/details/?categoryid=3958&model=TL-WN823N">wireless-adapter</a> from <a href="http://www.tp-link.us/">TP-Link</a> for remote-ssh-control (AP-mode)<br>[Note: this model is actually not the best choice to work with on a Raspi] (<a href="{{ site.baseurl }}/images/project/components/wlan.jpg" target="_blank">image</a>),

<li> a <a href="http://www.adafruit.com/product/2239">DotStar</a> LED strip from Adafruit: 60 separately addressable LEDs on a 1m-strip. Easily addressable via 4-PINS (5Volts, Ground, Data and Clock). High refreshing frequency, thus suitable for POV. (NOTE: NeoPixels is too slow, for example!),

<li> an infrared LED on the rotating body & a photodiode on the not-rotating part for thus measuring the rotating-frequency,

<li> a 4-PIN jack-plug like <a href="{{ site.baseurl }}/images/jack.jpg" target="_blank">this one</a> for transmitting the signal onto the rotating body,

<li> a motor of an old room-fan like <a href="{{ site.baseurl }}/images/fan.jpg" target="_blank">this one</a> for rotating the LEDs. We located it beneath the wooden slab. The advantage of this one is: It already comes with a common 230V-power supply-plug.

<li> the rotating construction, consisting of a aluminium rod (axis of the rotating system), two ball bearings and a circular grate holding the LED strip (we used a simple <a href="{{ site.baseurl }}/images/grate.jpg" target="_blank">barbecue-cooking</a> grate here ;) ),

<li> a toothed belt and two (self-made) gear-wheels to bring the rotation onto the grate and

<li> a big wooden slab and some aluminium rods to support the construction and minimize shakings from the rotations.

</ul>

<br>

<p class="fancy" align="justify">
The following pictures demonstrate how the single components work together in our construction (descriptions in the pictures are available in german only - sorry for that). For detailed questions, please <a href="{{ site.baseurl }}/contact">contact us</a>!
<br>

<table border="0">
<tr><td align="center" valign="middle">
<small>The whole construction except the motor beneath the slab:</small>
</br>
<img src="{{ site.baseurl }}/images/Komponenten.jpg" alt="whole POV" width="80%" title="whole POV">
</td></tr>
<tr><td align="center" valign="middle">
<small>The 4-PIN jack plug and the ball bearing on the upper part of the construction:</small>
<br>
<img src="{{ site.baseurl }}/images/Klinke.jpg" alt="4-PIN jack plug and ball bearing" width="80%" title="4-PIN jack plug and ball bearing">
</td></tr>
<tr><td align="center" valign="middle">
<small>The fan-motor and its control beneath the slab:</small>
<br>
<img src="{{ site.baseurl }}/images/Motor.jpg" alt="fan-motor" width="80%" title="fan-motor">
</td></tr>
<tr><td align="center" valign="middle">
<small>The toothed belt and the gear-wheel connected to the motor:</small>
<br>
<img src="{{ site.baseurl }}/images/Motor_oben.jpg" alt="toothed belt and gear-wheel" width="80%" title="toothed belt and gear-wheel">
</td></tr>
<tr><td align="center" valign="middle">
<small>The toothed belt and the gear-wheel connected to the rotating body, as well as the infrared-system:</small>
<img src="{{ site.baseurl }}/images/Zahnriemen.jpg" alt="toothed belt and gear-wheel; infrared-LED and photodiode" width="80%" title="toothed belt and gear-wheel; infrared-LED and photodiode">
</td></tr></table>

</p>

<br>
<div  style="border-bottom: 1px solid #ddd"></div>

<h2 align="center">
The programming and scripts
</h2>

<p class="fancy" align="justify">
For the scripts and the programming, we mainly used Python as an easy and Raspi-friendly programming language. All the scripts we wrote and used, can be found <a href="https://github.com/TobiBu/POV">here</a> in the folder "Raspi". Use them or copy whatever you need from them! (Note, that you may have to install some software on your Raspi like GPIO- & PWM controls or <a href="https://learn.adafruit.com/adafruit-dotstar-leds/overview">Adafruit's package</a> for controlling LED strips.)
<br>
The software mainly consists of a background-thread determining the rotating-frequency (get_freq.py; it simply waits for signals on one of the GPIO-PINs and calculates the time between single signals), another background-thread controlling the LED-Strip (pov_control.py) via the GPIO-PINs conntected to Clock and Data of the Strip and using the given <a href="https://learn.adafruit.com/adafruit-dotstar-leds/overview">module from Adafruit</a> (dotstar.c / dotstar.so) and the code for the user interface (main.py).
<br>
Furthermore you will find pngTOpov.py, which converts given png-files into a byte-list pov-file, the type of file which is used by pov_control.py.
<br>
<br>
Broadly speaking the png-files are converted into a array containing 4 bytes for each pixel: (0, BLUE, GREEN, RED), where each color is a gamma-corrected value. As we have 60 LEDs, the strip receives a list of 4 times 60 bytes for each new position while the rotation. Transmitting the data is mainly done by Adafruit's module.
<br>
The 60 LEDs correspond to a total height of 60 pixels, whereas the width is set by the number of flashing-positions on the globe. For rotation-symmetry-reasons we also used 60 pixels as width.
<br>
If the total width of the png-file is bigger than 60, the further columns are interpreted as new images after one or several rotations (like an animation). A height greater than 60 is simply reduced to the first 60 pixels.
</p>

<br>
<div  style="border-bottom: 1px solid #ddd"></div>

<h2 align="center">
Galery
</h2>

<p class="fancy" align="justify">
<a href="{{ site.baseurl }}/images/ex_video.mp4" target="_blank">Here</a> there is a short video demostrating the running POV globe (caution: 20mb) and in the following you can see some example png-files and the resulting images on the running POV (note, the faint red LEDs are displaying wrong due to some error) as well as the still construction:

</p>

<p class="fancy" align="justify">

<table border="0">
<tr><td align="center" valign="middle">
<img src="{{ site.baseurl }}/images/ex1.png" alt="1st example: a house and a tree (png)" width="100%" title="1st example: a house and a tree (png)">
</td><td align="center" valign="middle">
<img src="{{ site.baseurl }}/images/ex1.jpg" alt="1st example: a house and a tree (foto)" width="50%" title="1st example: a house and a tree (foto)">
</td></tr>
<tr><td align="center" valign="middle">
<img src="{{ site.baseurl }}/images/ex2.png" alt="2nd example: a worldmap (png)" width="100%" title="2nd example: a worldmap (png)">
</td><td align="center" valign="middle">
<img src="{{ site.baseurl }}/images/ex2.1.jpg" alt="2nd example: a worldmap (foto 1)" width="50%" title="2nd example: a worldmap (foto 1)">
</td><td align="center" valign="middle">
<img src="{{ site.baseurl }}/images/ex2.2.jpg" alt="2nd example: a worldmap (foto 2)" width="50%" title="2nd example: a worldmap (foto 2)">
</td></tr>
<tr><td align="center">
<img src="{{ site.baseurl }}/images/whole.jpg" width=45% alt="Our POV Globe." title="Our POV Globe">
</td></tr>
</table>

</p>

<br>
<div  style="border-bottom: 1px solid #ddd"></div>

<h2 align="center">
This page
</h2>
<p class="fancy" align="justify">

On this cool <a href="https://github.com">github</a>-webpage, made with <a href="jekyllrb.com">jekyll</a>, we want to tell anyone, who's interested, about our project. The homepage files can be found <a href=https://github.com/TobiBu/POV/tree/gh-pages>here</a>. Use them for your own website, if you want!<br>
If you have any questions, do not hesitate to aks <a href="{{ site.baseurl }}/contact">us</a>!

</p>

</div>
